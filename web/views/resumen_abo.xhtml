<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./menu_abo.xhtml">
            
            <ui:define name="content">
                <h:form id="principal">
                    <p:growl id="growl" life="2000" />

                    <p:tab title="Casos Nuevos Asignados">
                        
                           <h:panelGrid columns="1" cellpadding="10">
                               <h2>Se le han asignado los siguientes Casos</h2>
                               <p:dataTable id="dataTableAsignados" var="casoA" value="#{resumenAboBean.lazyModelCasosAsignados}" paginator="true" rows="5"
                                            paginatorTemplate="{FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                                            emptyMessage="No se ha econtrado casos activos disponibles"
                                            rowsPerPageTemplate="5" lazy="true">

                                   <p:column headerText="Núm. Causa" >
                                       <h:outputText value="#{casoA.uzatcasoNumcausa}" />
                                   </p:column>
                                   <p:column headerText="Motivo">
                                       <h:outputText value="#{casoA.uzatcasoMotivo}" />
                                   </p:column>
                                   <p:column headerText="Detalle">
                                       <h:outputText value="#{casoA.uzatcasoDetalle}" />
                                   </p:column>
                                   <p:column headerText="Tipo">
                                       <h:outputText value="#{casoA.uzatcasoTipo}" />
                                   </p:column>
                                   <p:column headerText="Fecha Inicial">
                                       <h:outputText value="#{casoA.uzatcasoFechaIn}" />
                                   </p:column>
                                   <p:column style="width:32px;text-align: center">
                                       <p:commandButton icon="ui-icon-search" update=":principal:dabogados" actionListener="#{resumenAboBean.findCasobyid(casoA.uzatcasoId)}" oncomplete="PF('wdialog').show();" ></p:commandButton>                   
                                   </p:column>
                               </p:dataTable>
                           </h:panelGrid>
                    </p:tab>
                    
                    <p:dialog id="dabogados" widgetVar="wdialog" header="Editar Detalles"  
                              modal="true" showEffect="fade" resizable="false" position="center center">
                            <h2> Editar Detalles del Caso</h2>
                            <p:panel id="panelFunc" header="Detalles del Caso" style="border-style: none !important">
                                <h:panelGrid columns="4" cellpadding="10">

                                    
                                    <h:outputText value="Numero de Causa:"/>
                                    <p:inputText value="#{resumenAboBean.selectedCaso.uzatcasoNumcausa}" />
                                    <h:outputText value="Motivo:"/>
                                    <p:inputText value="#{resumenAboBean.selectedCaso.uzatcasoMotivo}" />
                                    <h:outputText value="Detalle:"/>
                                    <p:inputTextarea value="#{resumenAboBean.selectedCaso.uzatcasoDetalle}" />
                                    <h:outputText value="Tipo:"/>
                                    <p:inputText value="#{resumenAboBean.selectedCaso.uzatcasoTipo}" />
                                    <h:outputText value="Materia:"/>
                          
                                    <p:selectOneMenu id="Materia" value="#{resumenAboBean.idMateria}">
                                        <f:selectItem itemLabel="Seleccione Materia" noSelectionOption="true" />
                                        <f:selectItems  value="#{resumenAboBean.itemsMaterias}"
                                                         var="model" itemLabel="#{model.description}" 
                                                         itemValue="#{model.value}" />
                                        <p:ajax update="Judicatura"  listener="#{resumenAboBean.loadlistJudi()}" />

                                     </p:selectOneMenu>

                                    <h:outputText value="Judicatura:"/>                           
                                    <p:selectOneMenu id="Judicatura" value="#{resumenAboBean.idJudicatura}">
                                        <f:selectItem itemLabel="Seleccione Judicatura" noSelectionOption="true" />
                                        <f:selectItems  value="#{resumenAboBean.itemsJudicaturas}"
                                                        var="model2" itemLabel="#{model2.description}" 
                                                        itemValue="#{model2.value}" />
                                    </p:selectOneMenu>

                                </h:panelGrid>  
 
                            </p:panel> 
                            <h:outputText value="                       "/>
                            <p:panel id="panelActor" header="Seleccione el Actor" style="border-style: none !important">
                                <h:panelGrid columns="4" cellpadding="10">
                                    <h:outputText value="Seleccione Actor:"/>
                                    <h:outputText value="#{resumenAboBean.selectedActor.uzatactorNombres} #{resumenAboBean.selectedActor.uzatactorApellidos}"/>
                                    <h:outputText value="Tipo de Actor:"/>
                                    <p:selectOneMenu id="patron" required="false" value="#{resumenAboBean.tipoActor}">
                                        <f:selectItem itemLabel="Seleccionar" itemValue="" noSelectionOption="true"/>
                                        <f:selectItem itemLabel="Demandado" itemValue="1"/>
                                        <f:selectItem itemLabel="Demandante" itemValue="2"/>
                                    </p:selectOneMenu>
                                    
                                    <h:outputText value="Seleccionar:"/>
                                    <p:commandButton value="#{resumenAboBean.botonAgregarActor}" update=":principal:selectactor, :principal:selectactor" oncomplete="PF('wactor').show();" ></p:commandButton>
  
                                    
                                </h:panelGrid>
                                
                            </p:panel>
                            
                            <p:commandButton value="Actualizar e Iniciar Caso" update=":principal:dataTableAsignados, :principal:dabogados  , growl" actionListener="#{resumenAboBean.botonActualizarCaso()}"></p:commandButton>
                    </p:dialog>
                    
                    <p:dialog id="selectactor" widgetVar="wactor" header="Seleccione Actor"  
                               modal="true" showEffect="fade" resizable="false" position="center center">
                            <h2> Asignar Actor</h2>
                            
                            <p:panel id="panelCedulaActor" header="Ingrese Numero de Cedula o ID UFA ESPE" >
                                <h:panelGrid columns="4" cellpadding="10">
                                    <h:outputText value="Seleccione:" />
                                    <p:selectOneMenu id="patter" required="false" value="#{resumenAboBean.idocedula}">
                                        <f:selectItem itemLabel="Seleccionar" itemValue="" noSelectionOption="true"/>
                                        <f:selectItem itemLabel="Cédula" itemValue="0"/>
                                        <f:selectItem itemLabel="ID UFA ESPE" itemValue="1"/>
                                    </p:selectOneMenu>
                                    <p:inputText value="#{resumenAboBean.cedulaActor}"/>
                                    <p:commandButton value="Buscar" update=":principal:panelDatosActor" actionListener="#{resumenAboBean.findActorbycedula()}"></p:commandButton>
                                    
                                    
                                </h:panelGrid>    
                            </p:panel>
                            
                            <p:panel id="panelDatosActor" header="Detalles Actor" >
                                <h:panelGrid columns="2" cellpadding="10">
                                    <h:outputText value="Nombres:" />
                                    <p:inputText value="#{resumenAboBean.selectedActor.uzatactorNombres}"></p:inputText>
                                    <h:outputText value="Apellidos:" />
                                    <p:inputText value="#{resumenAboBean.selectedActor.uzatactorApellidos}"></p:inputText>
                                    <h:outputText value="Cedula:" />
                                    <p:inputText value="#{resumenAboBean.selectedActor.uzatactorCedula}"></p:inputText>
                                    <h:outputText value="Dirección:" />
                                    <p:inputTextarea value="#{resumenAboBean.selectedActor.uzatactorDireccion}"></p:inputTextarea>
                                    <h:outputText value="Celular:" />
                                    <p:inputText value="#{resumenAboBean.selectedActor.uzatactorMovil}"></p:inputText>
                                    <h:outputText value="Institución:" />
                                    <p:inputText value="#{resumenAboBean.selectedActor.uzatactorInstitutcion}"></p:inputText>
                                    <p:commandButton value="Agregar" update=":principal:selectactor, :principal:panelActor , growl" actionListener="#{resumenAboBean.botonActualizarActor()}"></p:commandButton>
                                </h:panelGrid>    
                            </p:panel>
                    </p:dialog>       
                </h:form>
            </ui:define>


        </ui:composition>

    </body>
</html>
